# default folder
source ~/.mutt/accounts/rslindee-gmail.muttrc

# set hooks for different accounts
folder-hook rslindee-gmail/* source ~/.mutt/accounts/rslindee-gmail.muttrc

set move = no

auto_view text/html
auto_view application/pdf
set mailcap_path = ~/.mutt/mailcap
alternative_order text/plain text/enriched text/html

set sort = 'reverse-date'
set date_format="%m/%d/%y %H:%M"
set index_format="%2C [%Z] %?X?A& ? %D %-15.15F %s (%-4.4c)"
set help = no
set markers = no
set mark_old = no
set mime_forward = yes
set wait_key = no
set sleep_time = 0
set rfc2047_parameters = yes

set menu_scroll = yes

set editor = $EDITOR

set reflow_text = no
set wrap = 0
set pager_index_lines = 8

set charset = "utf-8"

set fast_reply           # skip to compose when replying
set fcc_attach           # save attachments with the body
unset mime_forward       # forward attachments as part of body
set forward_format = "Fwd: %s"       # format of subject when forwarding
set forward_decode                   # decode when forwarding
set forward_quote                    # include message in forwards
set reverse_name                     # reply as whomever it was to
set include                          # include message in replies

# maps
macro index o "<shell-escape>offlineimap<enter>" "run offlineimap to sync all mail"
bind index,pager g noop
bind index G last-entry
bind index gg first-entry
bind index,pager d half-down
bind index,pager u half-up
bind index,pager x delete-message
bind index,pager X undelete-message
bind index,pager R group-reply
macro index,pager \Cu |urlview\n
bind index,pager \Cf next-page
bind index,pager \Cb previous-page
bind attach <return> view-mailcap

macro index \C_ \
"<enter-command>set my_old_pipe_decode=\$pipe_decode my_old_wait_key=\$wait_key nopipe_decode nowait_key<enter>\
<shell-escape>notmuch-mutt -r --prompt search<enter>\
<change-folder-readonly>`echo ${XDG_CACHE_HOME:-$HOME/.cache}/notmuch/mutt/results`<enter>\
<enter-command>set pipe_decode=\$my_old_pipe_decode wait_key=\$my_old_wait_key<enter>" \
"notmuch: search mail"

macro index <F9> \
"<enter-command>set my_old_pipe_decode=\$pipe_decode my_old_wait_key=\$wait_key nopipe_decode nowait_key<enter>\
<pipe-message>notmuch-mutt -r thread<enter>\
<change-folder-readonly>`echo ${XDG_CACHE_HOME:-$HOME/.cache}/notmuch/mutt/results`<enter>\
<enter-command>set pipe_decode=\$my_old_pipe_decode wait_key=\$my_old_wait_key<enter>" \
"notmuch: reconstruct thread"

macro index <F6> \
"<enter-command>set my_old_pipe_decode=\$pipe_decode my_old_wait_key=\$wait_key nopipe_decode nowait_key<enter>\
<pipe-message>notmuch-mutt tag -- -inbox<enter>\
<enter-command>set pipe_decode=\$my_old_pipe_decode wait_key=\$my_old_wait_key<enter>" \
"notmuch: remove message from inbox"

# colors
color header     color208            default     .  # all (x-)header
color index      yellow              black      ~Q  # those I have already replied to.
color index      red                 default    ~D  # deleted
color index      blue                default    ~O  # old
color index      brightblue          default    ~P  # mail from myself
color index      brightblue          yellow     ~T  # tagged
color index      magenta             default    ~F  # flagged
color index      yellow              blue       ~v  # collapsed thread
color index      magenta             black      ~k  # GPG
color index      green               default    ~N  # new

# Header colors:
color header yellow default ".*"
color header red default "^(From)"
color header cyan default "^(Subject)"
color header white default "^(CC|BCC)"

color normal white black
color indicator black white
color error red default
color tilde black default
color message cyan default
color markers red white
color attachment brightyellow black
color search brightmagenta default
color status brightblack black
color hdrdefault brightgreen default
color quoted green default
color quoted1 magenta default
color quoted2 cyan default
color quoted3 yellow default
color quoted4 red default
color quoted5 brightred default
color signature brightgreen default
color bold black default
color underline black default

color body red default "[\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+" # Email addresses
color body brightblue default "(https?|ftp)://[\-\.,/%~_:?&=\#a-zA-Z0-9]+" # URL
color body green default "\`[^\`]*\`" # Green text between ` and `
